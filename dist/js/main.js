const form=document.getElementById("form"),firstNameInput=document.getElementById("firstname"),lastNameInput=document.getElementById("lastname"),nationalityInput=document.getElementById("nationality"),emailInput=document.getElementById("email"),dateInput=document.getElementById("date"),monthInput=document.getElementById("month"),yearInput=document.getElementById("year"),genderInputs=document.querySelectorAll('input[name="gender-group"]'),passwordInput=document.getElementById("password"),confirmInput=document.getElementById("confirm"),button=document.getElementById("form-button"),formItems=document.querySelectorAll(".form-item"),formItemGender=document.querySelector(".form__gender-item");function shakeButton(){button.classList.add("shake"),setTimeout((function(){button.classList.remove("shake")}),500)}function showError(e,t){if(!e)return;const r=e.closest(".form-item");r.querySelector(".form__error-message").textContent=t,r.classList.add("error")}function hideError(e){const t=e.closest(".form-item");t.querySelector(".form__error-message").textContent="",t.classList.remove("error")}function getSelectedGender(){for(const e of genderInputs)if(e.checked)return e;return null}function validName(e){return/^[a-zA-Z\s]*$/.test(e)}function validEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function validPassword(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(e)}form.addEventListener("submit",(function(e){e.preventDefault();const t=firstNameInput.value,r=lastNameInput.value,n=nationalityInput.value,o=emailInput.value,s=dateInput.value,a=monthInput.value,l=yearInput.value,u=getSelectedGender(),m=passwordInput.value,d=confirmInput.value;let i=!1;if(""===t?(showError(firstNameInput,"Please enter your first name"),i=!0):validName(t)?hideError(firstNameInput):(showError(firstNameInput,"First name should contain only letters"),i=!0),""===r?(showError(lastNameInput,"Please enter your last name"),i=!0):validName(r)?hideError(lastNameInput):(showError(lastNameInput,"Last name should contain only letters"),i=!0),""===n?(showError(nationalityInput,"Please select your nationality"),i=!0):hideError(nationalityInput),""===o?(showError(emailInput,"Please enter your email"),i=!0):validEmail(o)?hideError(emailInput):(showError(emailInput,"Please enter a valid email address"),i=!0),""===s||""===a||""===l?(showError(dateInput,"Please select your date of birth"),i=!0):hideError(dateInput),u?hideError(u):(showError(formItemGender,"Please select your gender"),i=!0),""===m?(showError(passwordInput,"Please enter a password"),i=!0):validPassword(m)?hideError(passwordInput):(showError(passwordInput,"Password should be at least 8 characters long"),i=!0),""===d?(showError(confirmInput,"Please confirm your password"),i=!0):d!==m?(showError(confirmInput,"Passwords do not match"),i=!0):hideError(confirmInput),i)return void shakeButton();const c={firstName:t,lastName:r,nationality:n,email:o,date:s,month:a,year:l,gender:u.value,password:m,confirm:d};fetch("./server-ok.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>e.json())).then((e=>{console.log(e),alert("Form submitted successfully "+JSON.stringify(c)),form.reset()})).catch((e=>{alert("Error submitting the form. Please try again later.")}))}));let currentIndex=0;function showField(e){for(let t=0;t<formItems.length;t++)hideError(formItems[t]),formItems[t].style.display=t<=e?"block":"none"}showField(currentIndex);for(let e=0;e<formItems.length;e++){const t=formItems[e].querySelectorAll(".content");for(let e=0;e<t.length;e++){const r="gender-group"==t[e].name?"change":"blur";t[e].addEventListener(r,(function(e){const t=e.target.closest(".form-item");let r=!0;const n=t.querySelectorAll(".content");for(let e=0;e<n.length;e++)r=r&&""!==n[e].value.trim();r&&t.dataset.next>currentIndex&&(currentIndex=t.dataset.next,showField(currentIndex))}))}}